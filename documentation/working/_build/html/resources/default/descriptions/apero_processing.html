


<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>&lt;no title&gt; &#8212; APERO 0.7.221 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bizstyle.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/apero.css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="_static/images/fonta/css/font-awesome.min.css">



    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
    <style type="text/css">
      table.right { float: left; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script>
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">

  <ul>
    <li><a title="Home" href="../../../index.html">
        <i class="fa fa-home fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="install" href="../../../user/general/installation.html">
        <i class="fa fa-cog fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="github" href="https://github.com/njcuk9999/apero-drs">
        <i class="fa fa-git-square fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="download pdf" href="../../../apero-docs.pdf">
        <i class="fa fa-download fa-3x" aria-hidden="true"></i></a></li>
  </ul>
    <div>
    <a href="../../../index.html">
      <img src="../../../_static/images/apero_logo.png" alt="APERO" />
    </a>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A PipelinE to Reduce Observations
    </div>

</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">APERO 0.7.221 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">&lt;no title&gt;</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/resources/default/descriptions/apero_processing.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>The processing script is the recommended way to run the reduction.
It takes a <a class="reference internal" href="../../../main/misc/glossary.html#term-run-ini-file"><span class="xref std std-term">run-ini-file</span></a> which contains parameters specific to the users
needs for that processing session. Based on these run-ini-file parameters and the
raw data (stored in the <a class="reference internal" href="../../../main/misc/glossary.html#term-DRS_DATA_RAW"><span class="xref std std-term">DRS_DATA_RAW</span></a> directory) a set of recipes or a
<span class="xref std std-term">recipe-sequences</span> will determine which recipes are run for which raw files.</p>
<p>The run-ini-files are an important part of the processing script and have
many options to control the processing run.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the following arguments can also be added to the command-line or python function call
(see section 4)</p>
</div>
<p>Options are:</p>
<ul>
<li><p>RUN_NAME: the name of the run</p></li>
<li><p>SEND_EMAIL: whether to send an email on start/finish</p></li>
<li><p>EMAIL_ADDRESS: the email address to send an email to</p></li>
<li><p>RUN_OBS_DIR: Whether to limit processing to a single <a class="reference internal" href="../../../main/misc/glossary.html#term-observation-directory"><span class="xref std std-term">observation-directory</span></a></p></li>
<li><p>EXCLUDE_OBS_DIRS: Whether to ignore certain observation-directories</p></li>
<li><p>INCLUDE_OBS_DIRS: Whether to limit processing to a set of observation-directories</p></li>
<li><p>PI_NAMES: Whether to limit processing to a single or list of PI_NAMES (must match the header key <a class="reference internal" href="../../../main/misc/glossary.html#term-KW_PI_NAME"><span class="xref std std-term">KW_PI_NAME</span></a>)</p></li>
<li><p>MASTER_OBS_DIR: The <a class="reference internal" href="../../../main/misc/glossary.html#term-observation-directory"><span class="xref std std-term">observation-directory</span></a> to use as the master</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>this should not be changed in general but does require calibrations from this night to be
present in the raw directory.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently we do not support multiple master_obs_dir and a full reduction should never mix
different master observation-directories</p>
</div>
</div></blockquote>
</li>
<li><dl>
<dt>CORES: The number of cores to use</dt><dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This should always be at least N-1 less than the total number of cores available</p>
</div>
</dd>
</dl>
</li>
<li><p>STOP_AT_EXCEPTION: The processing code will not continue past an error and will stop</p></li>
<li><dl>
<dt>TEST_RUN: Runs the processing script without running any recipes</dt><dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is highly recommended, please check that you are reducing the expected data before running
without TEST_RUN = False</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>USE_ENGINEERING: If True engineering observation-directories (those without science observation).</dt><dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>In general we do not recommend to reduce these nights as they may
reduce the quality of reduced data</p>
</div>
</dd>
</dl>
</li>
<li><p>TRIGGER_RUN: For use in online reductions only</p></li>
<li><p>USE_ODO_REJECTLIST: If True checks that odometer code aren’t already flagged as bad files</p></li>
<li><dl>
<dt>RECAL_TEMPLATES: If True recalculates the templates that are already present.</dt><dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This should only be done when re-reducing all data for a single object.
Recalculating the template for only new observations will greatly affect RV precision
and we do not recommend doing any time series analysis with a varying template.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A template hash key is available in the header of files that have used a template. If
unsure check that the template hash matches for all observations.</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>UPDATE_OBJ_DATABASE: If True the locally stored object database is updated from online.</dt><dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not do this unless you are re-reducing all the data. If the object database
has updated parameters this could affect RV precision (as the BERV calculation may
change).</p>
</div>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>RUN_XXX: For each recipe (or recipe in a sequence) there is a <a class="reference internal" href="../../../main/misc/glossary.html#term-shortname"><span class="xref std std-term">shortname</span></a> associated with it. A user can</dt><dd><p>turn on and off recipes within a sequence without having to create a new sequence.
i.e. setting <cite>RUN_PP = False</cite> will turn of the <cite>PP</cite> recipe (apero_preprocessing) all recipe-runs in an
apero_processing run will be skipped.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SKIP_XXX: Similar to RUN_XXX there is a <a class="reference internal" href="../../../main/misc/glossary.html#term-shortname"><span class="xref std std-term">shortname</span></a> that can be skipped, if and only if the recipe-run can be</dt><dd><p>found in the logging database (i.e. all required arguments are identical) and it has successfully completed
in a previous apero_processing run, or when run individually</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TELLURIC_TARGETS: A filter for certain recipes that use hot star observations to only use certain hot star object names</dt><dd><p>(and thus only use certain observations). The default value is “All” which uses all telluric objects
in a pre-configured list of telluric object.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SCIENCE_TARGETS: A filter for certain recipes that use science observations. Using this a user can only reduced data</dt><dd><p>for a single object name or a list of object names (separated by a comma).
For example if one sets <cite>SCIENCE_TARGETS=Gl699</cite> and had <cite>RUN_EXTOBJ=True</cite> only extractions of Gl699
would be reduced</p>
</dd>
</dl>
</li>
</ul>
<p>The very last piece of information required is the sequences (or individual recipe runs) that are required.
The should be numbered id00000, id00001, id00002 etc and should only contain an individual recipe run (with all correct
arguments) or a sequence name. For sequence names see the sequences page for an instrument
(e.g. for spirou click <a class="reference internal" href="../../../auto/recipe_sequences/spirou/sequences.html#sequences-spirou"><span class="std std-ref">here</span></a>).</p>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">APERO 0.7.221 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">&lt;no title&gt;</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Neil Cook.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>