


<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Shape Master Recipe &#8212; APERO 0.6.131 documentation</title>
    <link rel="stylesheet" href="../../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/apero.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Shape (per night) Recipe" href="shape_local.html" />
    <link rel="prev" title="Localisation Recipe" href="localisation.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="_static/images/fonta/css/font-awesome.min.css">



    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
    <style type="text/css">
      table.right { float: left; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script>
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">

  <ul>
    <li><a title="Home" href="../../../index.html">
        <i class="fa fa-home fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="install" href="../../general/installation.html">
        <i class="fa fa-cog fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="github" href="https://github.com/njcuk9999/apero-drs">
        <i class="fa fa-git-square fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="download pdf" href="../../../apero-docs.pdf">
        <i class="fa fa-download fa-3x" aria-hidden="true"></i></a></li>
  </ul>
    <div>
    <a href="../../../index.html">
      <img src="../../../_static/images/apero_logo.png" alt="APERO" />
    </a>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A PipelinE to Reduce Observations
    </div>

</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="shape_local.html" title="Shape (per night) Recipe"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="localisation.html" title="Localisation Recipe"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">APERO 0.6.131 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../spirou.html" >SPIRou documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../recipes_spirou.html" accesskey="U">SPIRou Recipes</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Shape Master Recipe</a><ul>
<li><a class="reference internal" href="#run">Run</a></li>
<li><a class="reference internal" href="#optional-arguments">Optional Arguments</a></li>
<li><a class="reference internal" href="#output-dir">Output Dir</a></li>
<li><a class="reference internal" href="#calibration-database-entry">Calibration database entry</a></li>
<li><a class="reference internal" href="#output-files">Output files</a></li>
<li><a class="reference internal" href="#plots">Plots</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="localisation.html"
                        title="previous chapter">Localisation Recipe</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="shape_local.html"
                        title="next chapter">Shape (per night) Recipe</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/user/spirou/recipes/shape_master.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="shape-master-recipe">
<span id="recipes-spirou-shape-master"></span><h1>Shape Master Recipe<a class="headerlink" href="#shape-master-recipe" title="Permalink to this headline">¶</a></h1>
<p>Creates a master FP image from all FPs processed. Uses this to work out the
required shifts due to the FP master image, slicer pupil geometry and the
bending of the orders (found in localisation).</p>
<div class="section" id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cal_shape_master_spirou.py <span class="o">[</span>DIRECTORY<span class="o">]</span> -hcfiles <span class="o">[</span>HCONE_HCONE<span class="o">]</span> -fpfiles <span class="o">[</span>FP_FP<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="optional-arguments">
<h2>Optional Arguments<a class="headerlink" href="#optional-arguments" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--database, --badpixfile, --badcorr, --backsub, --combine,
--darkfile, --darkcorr,  --flipimage, --fluxunits, --locofile,
--plot, --resize,
--debug, --listing, --listingall, --version, --info,
--program, --idebug, --breakpoints, --quiet, --help
</pre></div>
</div>
</div>
<div class="section" id="output-dir">
<h2>Output Dir<a class="headerlink" href="#output-dir" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>DRS_DATA_REDUC   <span class="se">\\</span> default <span class="s2">&quot;reduced&quot;</span> directory
</pre></div>
</div>
</div>
<div class="section" id="calibration-database-entry">
<h2>Calibration database entry<a class="headerlink" href="#calibration-database-entry" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>SHAPEX <span class="o">{</span>NIGHT_NAME<span class="o">}</span> <span class="o">{</span>FILENAME<span class="o">}</span> <span class="o">{</span>HUMAN DATE<span class="o">}</span> <span class="o">{</span>UNIX DATE<span class="o">}</span>
SHAPEY <span class="o">{</span>NIGHT_NAME<span class="o">}</span> <span class="o">{</span>FILENAME<span class="o">}</span> <span class="o">{</span>HUMAN DATE<span class="o">}</span> <span class="o">{</span>UNIX DATE<span class="o">}</span>
FPMASTER <span class="o">{</span>NIGHT_NAME<span class="o">}</span> <span class="o">{</span>FILENAME<span class="o">}</span> <span class="o">{</span>HUMAN DATE<span class="o">}</span> <span class="o">{</span>UNIX DATE<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="output-files">
<h2>Output files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_pp_shapex.fits            <span class="se">\\</span> dx shape map <span class="o">(</span>3100x4088<span class="o">)</span>
<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_pp_shapey.fits            <span class="se">\\</span> dy shape map <span class="o">(</span>3100x4088<span class="o">)</span>
<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_pp_fpmaster.fits          <span class="se">\\</span> fp master file <span class="o">(</span>3100x4088<span class="o">)</span> + FITS-TABLE
DEBUG_<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_shape_out_bdx.fits  <span class="se">\\</span> dx map before dy map <span class="o">(</span>3100x4088<span class="o">)</span>
DEBUG_<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_shape_in_fp.fits    <span class="se">\\</span> input fp before shape corr <span class="o">(</span>3100x4088<span class="o">)</span>
DEBUG_<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_shape_out_fp.fits   <span class="se">\\</span> input fp after shape corr <span class="o">(</span>3100x4088<span class="o">)</span>
DEBUG_<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_shape_in_hc.fits    <span class="se">\\</span> input hc before shape corr <span class="o">(</span>3100x4088<span class="o">)</span>
DEBUG_<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_shape_out_hc.fits   <span class="se">\\</span> input hc after shape corr <span class="o">(</span>3100x4088<span class="o">)</span>
DEBUG_<span class="o">{</span>ODOMETER_CODE<span class="o">}</span>_pp_background.fits <span class="se">\\</span> debug background file <span class="o">(</span>7x3100x4088<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="plots">
<h2>Plots<a class="headerlink" href="#plots" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>SHAPE_DX, SHAPE_ANGLE_OFFSET_ALL, SHAPE_ANGLE_OFFSET, SHAPE_LINEAR_TPARAMS
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="shape_local.html" title="Shape (per night) Recipe"
             >next</a> |</li>
        <li class="right" >
          <a href="localisation.html" title="Localisation Recipe"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">APERO 0.6.131 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../spirou.html" >SPIRou documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../recipes_spirou.html" >SPIRou Recipes</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Neil Cook.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.1.
    </div>
  </body>
</html>