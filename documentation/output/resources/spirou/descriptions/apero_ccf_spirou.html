


<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Radial velocity via CCF &#8212; APERO 0.8.001 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bizstyle.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/images/fonta/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/apero.css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="_static/images/fonta/css/font-awesome.min.css">



    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
    <style>
      table.right { float: left; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script>
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">

  <ul>
    <li><a title="Home" href="http://apero.exoplanets.ca/">
        <i class="fa fa-home fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="install" href="http://apero.exoplanets.ca/user/general/installation.html">
        <i class="fa fa-cog fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="github" href="https://github.com/njcuk9999/apero-drs">
        <i class="fa fa-git-square fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="download documentation" href="http://apero.exoplanets.ca/apero-docs.pdf">
        <i class="fa fa-download fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="download paper" href="https://ui.adsabs.harvard.edu/abs/2022PASP..134k4509C">
        <i class="fa fa-file-pdf-o fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="UdeM" href="http://apero.exoplanets.ca/main/misc/udem.html">
        <i class="fa fa-university fa-3x" aria-hidden="true"></i></a></li>
    <li><a title="ARI" href="http://apero.exoplanets.ca/ari/home/">
        <i class="fa fa-database fa-3x" aria-hidden="true"></i>
    </a></li>
  </ul>
    <div>
    <a href="http://apero.exoplanets.ca/">
      <img src="http://apero.exoplanets.ca/_static/images/apero_logo.png" alt="APERO" />
    </a>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A PipelinE to Reduce Observations
    </div>

</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">APERO 0.8.001 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Radial velocity via CCF</a></li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="radial-velocity-via-ccf">
<h1>Radial velocity via CCF<a class="headerlink" href="#radial-velocity-via-ccf" title="Permalink to this heading">¶</a></h1>
<p>The CCF method is very often used for PRV work, particularly in the optical domain. In the early APERO effort, it was
the main tool to derive precise RV values. When implementing a near-infrared version of the CCF, a number of
challenges appeared. The near-infrared domain is plagued with telluric absorption, and even after telluric correction,
some wavelength domains are expected to have significant excess noise levels. Deep or saturated telluric lines cannot
be corrected and are better left as gaps (represented as NAN) in the spectrum that are fixed for the entire time
series considered. When computing a CCF, how does one account for gaps in the data? The star’s yearly line of sight
variations will cause this gap to shift against the stellar spectrum by up to <span class="math notranslate nohighlight">\(\pm 32 kms^{-1}\)</span> depending
on ecliptic latitude. In the optical, one can simply reject the entire domain affected by the gap (64 <span class="math notranslate nohighlight">\(kms^{-1}\)</span>
plus the gap width); however, at optical wavelengths, deep absorption lines are sufficiently sparse that the overall
loss in wavelength domain due to telluric absorption is small, which is not the case in the near-infrared.</p>
<p>To further obfuscate the issue, telluric absorption varies between nights, so if one went down this path of masking,
it would end with the masking of a large window affected by any line that gets deeper than a given threshold, even if
only once in a time-series that may include hundreds of visits. The combination of varying conditions and yearly BERV
excursions leads to a loss of domain that is simply unacceptable, especially considering that the parts of the
near-infrared that are richest in sharp spectroscopic features (See Figure 4 in Artigau et al. 2022) are at the blue
and red edges of the H band, which are affected by telluric water absorption.</p>
<p>We opted for a CCF that correlates weighted delta functions against the spectrum but set the weight to zero when
reaching a point below 0.5 telluric transmission (where unity is no telluric absorption). This is done on a
spectrum-to-spectrum basis, to minimize the effective throughput losses. This CCF measurement is performed per
spectrum using one of the 3 standard masks available in APERO depending on the star’s temperature (GL846, Gl699,
Gl905 respectively for Teff &gt;3500 K, 3000-3500 K, &lt;3000 K. We derive per-order as well as global CCFs. These data
products are useful to confirm the systemic velocity of the star, avoiding eventual target misidentifying, as well
as for flagging spectroscopic binaries. For time-series analysis, it can be significantly improved upon by using
all observations to perform a spectral cleaning to obtain a much cleaner CCF or through completely different methods,
such as the <a class="reference external" href="https://lbl.exoplanets.ca">line-by-line algorithm</a>.</p>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">APERO 0.8.001 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Radial velocity via CCF</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Neil Cook.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
  </body>
</html>